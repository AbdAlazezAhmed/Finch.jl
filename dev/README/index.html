<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Finch.jl · Finch.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link rel="canonical" href="https://willow-ahrens.github.io/Finch.jl/README/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script><link href="../assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.png" alt="Finch.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">Finch.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../usage/">Usage</a></li><li><a class="tocitem" href="../semantics/">Semantics</a></li><li><a class="tocitem" href="../fibers/">Array Formats</a></li><li><a class="tocitem" href="../algebra/">Custom Functions</a></li><li><a class="tocitem" href="../fileio/">Tensor File I/O</a></li><li><a class="tocitem" href="../interop/">C, C++, ...</a></li><li><a class="tocitem" href="../performance/">Performance Tips</a></li><li><a class="tocitem" href="../internals/">Internals</a></li><li><a class="tocitem" href="../directory_structure/">Directory Structure</a></li><li><a class="tocitem" href="../CONTRIBUTING/">Contributing</a></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../benchmark/">Benchmarking</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Finch.jl</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Finch.jl</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/willow-ahrens/Finch.jl/blob/main/README.md#" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Finch.jl"><a class="docs-heading-anchor" href="#Finch.jl">Finch.jl</a><a id="Finch.jl-1"></a><a class="docs-heading-anchor-permalink" href="#Finch.jl" title="Permalink"></a></h1><p>[docs]:https://willow-ahrens.github.io/Finch.jl/stable [ddocs]:https://willow-ahrens.github.io/Finch.jl/dev [ci]:https://github.com/willow-ahrens/Finch.jl/actions/workflows/CI.yml?query=branch%3Amain [cov]:https://codecov.io/gh/willow-ahrens/Finch.jl [tool]:https://mybinder.org/v2/gh/willow-ahrens/Finch.jl/gh-pages?labpath=dev%2Finteractive.ipynb</p><p>[docs<em>ico]:https://img.shields.io/badge/docs-stable-blue.svg [ddocs</em>ico]:https://img.shields.io/badge/docs-dev-blue.svg [ci<em>ico]:https://github.com/willow-ahrens/Finch.jl/actions/workflows/CI.yml/badge.svg?branch=main [cov</em>ico]:https://codecov.io/gh/willow-ahrens/Finch.jl/branch/main/graph/badge.svg [tool<em>ico]:https://mybinder.org/badge</em>logo.svg</p><table><tr><th style="text-align: center"><strong>Documentation</strong></th><th style="text-align: center"><strong>Build Status</strong></th><th style="text-align: center"><strong>Try It Online!</strong></th></tr><tr><td style="text-align: center">[![][docs<em>ico]][docs] [![][ddocs</em>ico]][ddocs]</td><td style="text-align: center">[![][ci<em>ico]][ci] [![][cov</em>ico]][cov]</td><td style="text-align: center">[![][tool_ico]][tool]</td></tr></table><p>Finch is a adaptable Julia-to-Julia compiler for loop nests over sparse or structured multidimensional arrays.  Finch allows you to write <code>for</code>-loops as if they are dense, but compile them to be sparse! Finch compiles the loops based on the structure of the data! The compiler takes care of applying rules like <code>x * 0 =&gt; 0</code> and the like to avoid redundant computation. </p><table><tr><th style="text-align: center"><strong>Features</strong></th><th style="text-align: center"><strong>Syntax (e.g. ...)</strong></th></tr><tr><td style="text-align: center">Major Sparse Formats (CSC, CSF, COO, Hash, Bytemap, Dense Triangular)</td><td style="text-align: center"><code>Fiber!(Dense(SparseList(Element(0.0)))</code></td></tr><tr><td style="text-align: center">RLE (Run Length Encoding) and Sparse RLE</td><td style="text-align: center"><code>Fiber!(Dense(RepeatRLE(0.0)))</code></td></tr><tr><td style="text-align: center">Arbitrary Fill Values Other Than Zero</td><td style="text-align: center"><code>Fiber!(SparseList(Element(1.0)))</code></td></tr><tr><td style="text-align: center">Arbitrary Operators</td><td style="text-align: center"><code>x[] &lt;&lt;min&gt;&gt;= y[i] + z[i]</code></td></tr><tr><td style="text-align: center">Multiple Outputs</td><td style="text-align: center"><code>x[] &lt;&lt;min&gt;&gt;= y; z[] &lt;&lt;max&gt;&gt;=y</code></td></tr><tr><td style="text-align: center">Multicore Parallelism</td><td style="text-align: center"><code>for i = parallel(1:100)</code></td></tr><tr><td style="text-align: center">Conditionals</td><td style="text-align: center"><code>if dist[] &lt; best_dist[]</code></td></tr><tr><td style="text-align: center">Convolution</td><td style="text-align: center"><code>A[i + j]</code></td></tr><tr><td style="text-align: center">Concatenation</td><td style="text-align: center"><code>coalesce(A[~i], B[~i - size(A, 1)])</code></td></tr></table><p>In addition to supporting <a href="https://en.wikipedia.org/wiki/Sparse_matrix">sparse arrays</a>, Finch can also handle <a href="https://en.wikipedia.org/wiki/GraphBLAS">custom operators and fill values other than zero</a>, <a href="https://en.wikipedia.org/wiki/Run-length_encoding">runs</a> of repeated values, or even <a href="https://en.wikipedia.org/wiki/Sparse_matrix#Special_structure">special structures</a> such as clustered nonzeros or triangular patterns. Finch also supports <code>if</code>-statements and custom user types and functions.  Users can add rewrite rules to inform the compiler about any special user-defined properties or optimizations.  You can even modify indexing expressions to express sparse convolution, or to describe windows into structured arrays.</p><p>As an example, here&#39;s a program which calculates the minimum, maximum, sum, and variance of a sparse vector, reading the vector only once, and only reading nonzero values:</p><pre><code class="language-julia hljs">using Finch

X = Fiber!(SparseList(Element(0.0)), fsprand((10,), 0.5))
x_min = Scalar(Inf)
x_max = Scalar(-Inf)
x_sum = Scalar(0.0)
x_var = Scalar(0.0)
@finch begin
    for i = _
        x = X[i]
        x_min[] &lt;&lt;min&gt;&gt;= x
        x_max[] &lt;&lt;max&gt;&gt;= x
        x_sum[] += x
        x_var[] += x * x
    end
end;</code></pre><p>Array formats in Finch are described recursively mode by mode.  Semantically, an array in Finch can be understood as a tree, where each level in the tree corresponds to a dimension and each edge corresponds to an index. For example, <code>Fiber!(Dense(SparseList(Element(0.0))))</code> constructs a <code>Float64</code> CSC-format sparse matrix, and <code>Fiber!(SparseList(SparseList(Element(0.0))))</code> constructs a DCSC-format hypersparse matrix. As another example, here&#39;s a column-major sparse matrix-vector multiply:</p><pre><code class="language-julia hljs">x = Fiber!(Dense(Element(0.0)), rand(42));
A = Fiber!(Dense(SparseList(Element(0.0))), fsprand((42, 42), 0.1));
y = Fiber!(Dense(Element(0.0)));
@finch begin
    y .= 0
    for j=_, i=_
        y[i] += A[i, j] * x[j]
    end
end;</code></pre><p>At it&#39;s heart, Finch is powered by a new domain specific language for coiteration, breaking structured iterators into control flow units we call <strong>Looplets</strong>. Looplets are lowered progressively with several stages for rewriting and simplification.</p><p>The technologies enabling Finch are described in our <a href="https://doi.org/10.1145/3579990.3580020">manuscript</a>.</p><h1 id="Installation"><a class="docs-heading-anchor" href="#Installation">Installation</a><a id="Installation-1"></a><a class="docs-heading-anchor-permalink" href="#Installation" title="Permalink"></a></h1><p>At the <a href="https://julialang.org/downloads/">Julia</a> REPL, install the latest stable version by running:</p><pre><code class="language-julia hljs">julia&gt; using Pkg; Pkg.add(&quot;Finch&quot;)</code></pre></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.25 on <span class="colophon-date" title="Monday 28 August 2023 14:39">Monday 28 August 2023</span>. Using Julia version 1.9.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
